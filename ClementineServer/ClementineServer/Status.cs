namespace ClementineBasicServer
{
    class ClementineStatus
    {
        private object statusLock = new object();

        private bool destructive = false;

        public bool Destructive
        {
            get
            {
                lock (statusLock)
                {
                    return destructive;
                }
            }

            set
            {
                lock (statusLock)
                {
                    destructive = value;
                }
            }
        }

        private bool loud = true;

        public bool Loud
        {
            get
            {
                lock (statusLock)
                {
                    return loud;
                }
            }

            set
            {
                lock (statusLock)
                {
                    loud = value;
                }
            }
        }

        private bool done = false;

        public bool Done
        {
            get
            {
                lock (statusLock)
                {
                    return done;
                }
            }

            set
            {
                lock (statusLock)
                {
                    done = value;
                }
            }
        }

        private byte requestedPayload = (byte)255;

        public byte RequestedPayload
        {
            get
            {
                lock (statusLock)
                {
                    return requestedPayload;
                }
            }

            set
            {
                lock (statusLock)
                {
                    requestedPayload = value;
                }
            }
        }

        public void SetAll(bool destructive, bool loud, bool done, byte requestedPayload, string payloadString, string stealFile)
        {
            lock (statusLock)
            {
                this.destructive = destructive;
                this.loud = loud;
                this.done = done;
                this.requestedPayload = requestedPayload;
                this.payloadString = payloadString;
                this.stealFile = stealFile;
            }
        }

        public ClementineStatus GetAll()
        {
            lock (statusLock)
            {
                return new ClementineStatus()
                {
                    destructive = destructive,
                    loud = loud,
                    done = done,
                    requestedPayload = requestedPayload,
                    payloadString = payloadString,
                    stealFile = stealFile
                };
            }
        }

        private string payloadString = "";

        public string PayloadString
        {
            get
            {
                lock(statusLock)
                {
                    return payloadString;
                }
            }

            set
            {
                lock(statusLock)
                {
                    statusLock = value;
                }
            }
        }

        private string stealFile = "";
        
        public string StealFile
        {
            get
            {
                lock(statusLock)
                {
                    return stealFile;
                }
            }

            set
            {
                lock(statusLock)
                {
                    stealFile = value;
                }
            }
        }
    }
}